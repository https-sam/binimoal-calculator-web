{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SVGmaction = void 0;\n\nvar Wrapper_js_1 = require(\"../Wrapper.js\");\n\nvar maction_js_1 = require(\"../../common/Wrappers/maction.js\");\n\nvar maction_js_2 = require(\"../../common/Wrappers/maction.js\");\n\nvar maction_js_3 = require(\"../../../core/MmlTree/MmlNodes/maction.js\");\n\nvar SVGmaction = function (_super) {\n  __extends(SVGmaction, _super);\n\n  function SVGmaction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SVGmaction.prototype.toSVG = function (parent) {\n    var svg = this.standardSVGnode(parent);\n    var child = this.selected;\n\n    var _a = child.getBBox(),\n        h = _a.h,\n        d = _a.d,\n        w = _a.w;\n\n    this.adaptor.append(this.element, this.svg('rect', {\n      width: this.fixed(w),\n      height: this.fixed(h + d),\n      y: this.fixed(-d),\n      fill: 'none',\n      'pointer-events': 'all'\n    }));\n    child.toSVG(svg);\n    this.action(this, this.data);\n  };\n\n  SVGmaction.prototype.setEventHandler = function (type, handler) {\n    this.element.addEventListener(type, handler);\n  };\n\n  SVGmaction.kind = maction_js_3.MmlMaction.prototype.kind;\n  SVGmaction.styles = {\n    '[jax=\"SVG\"] mjx-tool': {\n      display: 'inline-block',\n      position: 'relative',\n      width: 0,\n      height: 0\n    },\n    '[jax=\"SVG\"] mjx-tool > mjx-tip': {\n      position: 'absolute',\n      top: 0,\n      left: 0\n    },\n    'mjx-tool > mjx-tip': {\n      display: 'inline-block',\n      padding: '.2em',\n      border: '1px solid #888',\n      'font-size': '70%',\n      'background-color': '#F8F8F8',\n      color: 'black',\n      'box-shadow': '2px 2px 5px #AAAAAA'\n    },\n    'g[data-mml-node=\"maction\"][data-toggle]': {\n      cursor: 'pointer'\n    },\n    'mjx-status': {\n      display: 'block',\n      position: 'fixed',\n      left: '1em',\n      bottom: '1em',\n      'min-width': '25%',\n      padding: '.2em .4em',\n      border: '1px solid #888',\n      'font-size': '90%',\n      'background-color': '#F8F8F8',\n      color: 'black'\n    }\n  };\n  SVGmaction.actions = new Map([['toggle', [function (node, _data) {\n    node.adaptor.setAttribute(node.element, 'data-toggle', node.node.attributes.get('selection'));\n    var math = node.factory.jax.math;\n    var document = node.factory.jax.document;\n    var mml = node.node;\n    node.setEventHandler('click', function (event) {\n      if (!math.end.node) {\n        math.start.node = math.end.node = math.typesetRoot;\n        math.start.n = math.end.n = 0;\n      }\n\n      mml.nextToggleSelection();\n      math.rerender(document);\n      event.stopPropagation();\n    });\n  }, {}]], ['tooltip', [function (node, data) {\n    var tip = node.childNodes[1];\n    if (!tip) return;\n    var rect = node.firstChild();\n\n    if (tip.node.isKind('mtext')) {\n      var text = tip.node.getText();\n      node.adaptor.insert(node.svg('title', {}, [node.text(text)]), rect);\n    } else {\n      var adaptor_1 = node.adaptor;\n      var container_1 = node.jax.container;\n      var math = node.node.factory.create('math', {}, [node.childNodes[1].node]);\n      var tool_1 = node.html('mjx-tool', {}, [node.html('mjx-tip')]);\n      var hidden_1 = adaptor_1.append(rect, node.svg('foreignObject', {\n        style: {\n          display: 'none'\n        }\n      }, [tool_1]));\n      node.jax.processMath(math, adaptor_1.firstChild(tool_1));\n      node.childNodes[1].node.parent = node.node;\n      node.setEventHandler('mouseover', function (event) {\n        data.stopTimers(node, data);\n        data.hoverTimer.set(node, setTimeout(function () {\n          adaptor_1.setStyle(tool_1, 'left', '0');\n          adaptor_1.setStyle(tool_1, 'top', '0');\n          adaptor_1.append(container_1, tool_1);\n          var tbox = adaptor_1.nodeBBox(tool_1);\n          var nbox = adaptor_1.nodeBBox(node.element);\n          var dx = (nbox.right - tbox.left) / node.metrics.em + node.dx;\n          var dy = (nbox.bottom - tbox.bottom) / node.metrics.em + node.dy;\n          adaptor_1.setStyle(tool_1, 'left', node.px(dx));\n          adaptor_1.setStyle(tool_1, 'top', node.px(dy));\n        }, data.postDelay));\n        event.stopPropagation();\n      });\n      node.setEventHandler('mouseout', function (event) {\n        data.stopTimers(node, data);\n        var timer = setTimeout(function () {\n          return adaptor_1.append(hidden_1, tool_1);\n        }, data.clearDelay);\n        data.clearTimer.set(node, timer);\n        event.stopPropagation();\n      });\n    }\n  }, maction_js_2.TooltipData]], ['statusline', [function (node, data) {\n    var tip = node.childNodes[1];\n    if (!tip) return;\n\n    if (tip.node.isKind('mtext')) {\n      var adaptor_2 = node.adaptor;\n      var text_1 = tip.node.getText();\n      adaptor_2.setAttribute(node.element, 'data-statusline', text_1);\n      node.setEventHandler('mouseover', function (event) {\n        if (data.status === null) {\n          var body = adaptor_2.body(adaptor_2.document);\n          data.status = adaptor_2.append(body, node.html('mjx-status', {}, [node.text(text_1)]));\n        }\n\n        event.stopPropagation();\n      });\n      node.setEventHandler('mouseout', function (event) {\n        if (data.status) {\n          adaptor_2.remove(data.status);\n          data.status = null;\n        }\n\n        event.stopPropagation();\n      });\n    }\n  }, {\n    status: null\n  }]]]);\n  return SVGmaction;\n}(maction_js_1.CommonMactionMixin(Wrapper_js_1.SVGWrapper));\n\nexports.SVGmaction = SVGmaction;","map":{"version":3,"sources":["/Users/sam/Desktop/projects/Binomial_expansion/Web/binomial/node_modules/mathjax-full/ts/output/svg/Wrappers/maction.ts"],"names":[],"mappings":"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","sourcesContent":["/*************************************************************\n *\n *  Copyright (c) 2018-2021 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements the SVGmaction wrapper for the MmlMaction object\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\nimport {SVGWrapper, SVGConstructor} from '../Wrapper.js';\nimport {CommonMactionMixin} from '../../common/Wrappers/maction.js';\nimport {ActionDef} from '../../common/Wrappers/maction.js';\nimport {EventHandler, TooltipData} from '../../common/Wrappers/maction.js';\nimport {MmlMaction} from '../../../core/MmlTree/MmlNodes/maction.js';\nimport {TextNode, AbstractMmlNode} from '../../../core/MmlTree/MmlNode.js';\nimport {StyleList} from '../../../util/StyleList.js';\n\n/*****************************************************************/\n/**\n * The SVGmaction wrapper for the MmlMaction object\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n */\n// @ts-ignore\nexport class SVGmaction<N, T, D> extends\nCommonMactionMixin<SVGWrapper<any, any, any>, SVGConstructor<any, any, any>>(SVGWrapper) {\n\n  /**\n   * The maction wrapper\n   */\n  public static kind = MmlMaction.prototype.kind;\n\n  /**\n   * @override\n   */\n  public static styles: StyleList = {\n    '[jax=\"SVG\"] mjx-tool': {\n      display: 'inline-block',\n      position: 'relative',\n      width: 0, height: 0\n    },\n    '[jax=\"SVG\"] mjx-tool > mjx-tip': {\n      position: 'absolute',\n      top: 0, left: 0\n    },\n    'mjx-tool > mjx-tip': {\n      display: 'inline-block',\n      padding: '.2em',\n      border: '1px solid #888',\n      'font-size': '70%',\n      'background-color': '#F8F8F8',\n      color: 'black',\n      'box-shadow': '2px 2px 5px #AAAAAA'\n    },\n    'g[data-mml-node=\"maction\"][data-toggle]': {\n      cursor: 'pointer'\n    },\n    'mjx-status': {\n      display: 'block',\n      position: 'fixed',\n      left: '1em',\n      bottom: '1em',\n      'min-width': '25%',\n      padding: '.2em .4em',\n      border: '1px solid #888',\n      'font-size': '90%',\n      'background-color': '#F8F8F8',\n      color: 'black'\n    }\n  };\n\n  /**\n   * The valid action types and their handlers\n   */\n  public static actions = new Map([\n    ['toggle', [(node, _data) => {\n      //\n      // Mark which child is selected\n      //\n      node.adaptor.setAttribute(node.element, 'data-toggle', node.node.attributes.get('selection') as string);\n      //\n      // Cache the data needed to select another node\n      //\n      const math = node.factory.jax.math;\n      const document = node.factory.jax.document;\n      const mml = node.node as MmlMaction;\n      //\n      // Add a click handler that changes the selection and rerenders the expression\n      //\n      node.setEventHandler('click', (event: Event) => {\n        if (!math.end.node) {\n          //\n          // If the MathItem was created by hand, it might not have a node\n          // telling it where to replace the existing math, so set it.\n          //\n          math.start.node = math.end.node = math.typesetRoot;\n          math.start.n = math.end.n = 0;\n        }\n        mml.nextToggleSelection();\n        math.rerender(document);\n        event.stopPropagation();\n      });\n    }, {}]],\n\n    ['tooltip', [(node, data) => {\n      const tip = node.childNodes[1];\n      if (!tip) return;\n      const rect = node.firstChild();\n      if (tip.node.isKind('mtext')) {\n        //\n        // Text tooltips are handled through title attributes\n        //\n        const text = (tip.node as TextNode).getText();\n        node.adaptor.insert(node.svg('title', {}, [node.text(text)]), rect);\n      } else {\n        //\n        // Math tooltips are handled through hidden nodes and event handlers\n        //\n        const adaptor = node.adaptor;\n        const container = node.jax.container;\n        const math = (node.node as AbstractMmlNode).factory.create('math', {}, [node.childNodes[1].node]);\n        const tool = node.html('mjx-tool', {}, [node.html('mjx-tip')]);\n        const hidden = adaptor.append(rect, node.svg('foreignObject', {style: {display: 'none'}}, [tool]));\n        node.jax.processMath(math, adaptor.firstChild(tool));\n        node.childNodes[1].node.parent = node.node;\n        //\n        // Set up the event handlers to display and remove the tooltip\n        //\n        node.setEventHandler('mouseover', (event: Event) => {\n          data.stopTimers(node, data);\n          data.hoverTimer.set(node, setTimeout(() => {\n            adaptor.setStyle(tool, 'left', '0');\n            adaptor.setStyle(tool, 'top', '0');\n            adaptor.append(container, tool);\n            const tbox = adaptor.nodeBBox(tool);\n            const nbox = adaptor.nodeBBox(node.element);\n            const dx = (nbox.right - tbox.left) / node.metrics.em + node.dx;\n            const dy = (nbox.bottom - tbox.bottom) / node.metrics.em + node.dy;\n            adaptor.setStyle(tool, 'left', node.px(dx));\n            adaptor.setStyle(tool, 'top', node.px(dy));\n          }, data.postDelay));\n          event.stopPropagation();\n        });\n        node.setEventHandler('mouseout',  (event: Event) => {\n          data.stopTimers(node, data);\n          const timer = setTimeout(() => adaptor.append(hidden, tool), data.clearDelay);\n          data.clearTimer.set(node, timer);\n          event.stopPropagation();\n        });\n      }\n    }, TooltipData]],\n\n    ['statusline', [(node, data) => {\n      const tip = node.childNodes[1];\n      if (!tip) return;\n      if (tip.node.isKind('mtext')) {\n        const adaptor = node.adaptor;\n        const text = (tip.node as TextNode).getText();\n        adaptor.setAttribute(node.element, 'data-statusline', text);\n        //\n        // Set up event handlers to change the status window\n        //\n        node.setEventHandler('mouseover', (event: Event) => {\n          if (data.status === null) {\n            const body = adaptor.body(adaptor.document);\n            data.status = adaptor.append(body, node.html('mjx-status', {}, [node.text(text)]));\n          }\n          event.stopPropagation();\n        });\n        node.setEventHandler('mouseout', (event: Event) => {\n          if (data.status) {\n            adaptor.remove(data.status);\n            data.status = null;\n          }\n          event.stopPropagation();\n        });\n      }\n    }, {\n      status: null  // cached status line\n    }]]\n\n  ] as ActionDef<SVGmaction<any, any, any>>[]);\n\n  /*************************************************************/\n\n  /**\n   * @override\n   */\n  public toSVG(parent: N) {\n    const svg = this.standardSVGnode(parent);\n    const child = this.selected;\n    const {h, d, w} = child.getBBox();\n    this.adaptor.append(this.element, this.svg('rect', {\n      width: this.fixed(w), height: this.fixed(h + d), y: this.fixed(-d),\n      fill: 'none', 'pointer-events': 'all'\n    }));\n    child.toSVG(svg);\n    this.action(this, this.data);\n  }\n\n  /**\n   * Add an event handler to the output for this maction\n   */\n  public setEventHandler(type: string, handler: EventHandler) {\n    (this.element as any).addEventListener(type, handler);\n  }\n\n}\n"]},"metadata":{},"sourceType":"script"}