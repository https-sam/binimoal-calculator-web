{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HTMLMathItem = void 0;\n\nvar MathItem_js_1 = require(\"../../core/MathItem.js\");\n\nvar HTMLMathItem = function (_super) {\n  __extends(HTMLMathItem, _super);\n\n  function HTMLMathItem(math, jax, display, start, end) {\n    if (display === void 0) {\n      display = true;\n    }\n\n    if (start === void 0) {\n      start = {\n        node: null,\n        n: 0,\n        delim: ''\n      };\n    }\n\n    if (end === void 0) {\n      end = {\n        node: null,\n        n: 0,\n        delim: ''\n      };\n    }\n\n    return _super.call(this, math, jax, display, start, end) || this;\n  }\n\n  Object.defineProperty(HTMLMathItem.prototype, \"adaptor\", {\n    get: function () {\n      return this.inputJax.adaptor;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  HTMLMathItem.prototype.updateDocument = function (_html) {\n    if (this.state() < MathItem_js_1.STATE.INSERTED) {\n      if (this.inputJax.processStrings) {\n        var node = this.start.node;\n\n        if (node === this.end.node) {\n          if (this.end.n && this.end.n < this.adaptor.value(this.end.node).length) {\n            this.adaptor.split(this.end.node, this.end.n);\n          }\n\n          if (this.start.n) {\n            node = this.adaptor.split(this.start.node, this.start.n);\n          }\n\n          this.adaptor.replace(this.typesetRoot, node);\n        } else {\n          if (this.start.n) {\n            node = this.adaptor.split(node, this.start.n);\n          }\n\n          while (node !== this.end.node) {\n            var next = this.adaptor.next(node);\n            this.adaptor.remove(node);\n            node = next;\n          }\n\n          this.adaptor.insert(this.typesetRoot, node);\n\n          if (this.end.n < this.adaptor.value(node).length) {\n            this.adaptor.split(node, this.end.n);\n          }\n\n          this.adaptor.remove(node);\n        }\n      } else {\n        this.adaptor.replace(this.typesetRoot, this.start.node);\n      }\n\n      this.start.node = this.end.node = this.typesetRoot;\n      this.start.n = this.end.n = 0;\n      this.state(MathItem_js_1.STATE.INSERTED);\n    }\n  };\n\n  HTMLMathItem.prototype.updateStyleSheet = function (document) {\n    document.addStyleSheet();\n  };\n\n  HTMLMathItem.prototype.removeFromDocument = function (restore) {\n    if (restore === void 0) {\n      restore = false;\n    }\n\n    if (this.state() >= MathItem_js_1.STATE.TYPESET) {\n      var adaptor = this.adaptor;\n      var node = this.start.node;\n      var math = adaptor.text('');\n\n      if (restore) {\n        var text = this.start.delim + this.math + this.end.delim;\n\n        if (this.inputJax.processStrings) {\n          math = adaptor.text(text);\n        } else {\n          var doc = adaptor.parse(text, 'text/html');\n          math = adaptor.firstChild(adaptor.body(doc));\n        }\n      }\n\n      if (adaptor.parent(node)) {\n        adaptor.replace(math, node);\n      }\n\n      this.start.node = this.end.node = math;\n      this.start.n = this.end.n = 0;\n    }\n  };\n\n  return HTMLMathItem;\n}(MathItem_js_1.AbstractMathItem);\n\nexports.HTMLMathItem = HTMLMathItem;","map":{"version":3,"sources":["/Users/sam/Desktop/projects/Binomial_expansion/Web/binomial/node_modules/mathjax-full/ts/handlers/html/HTMLMathItem.ts"],"names":[],"mappings":"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","sourcesContent":["/*************************************************************\n *\n *  Copyright (c) 2017-2021 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements the HTMLMathItem class\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\nimport {AbstractMathItem, Location, STATE} from '../../core/MathItem.js';\nimport {InputJax} from '../../core/InputJax.js';\nimport {HTMLDocument} from './HTMLDocument.js';\n\n/*****************************************************************/\n/**\n *  Implements the HTMLMathItem class (extends AbstractMathItem)\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n */\nexport class HTMLMathItem<N, T, D> extends AbstractMathItem<N, T, D> {\n\n  /**\n   * Easy access to DOM adaptor\n   */\n  get adaptor() {\n    return this.inputJax.adaptor;\n  }\n\n  /**\n   * @override\n   */\n  constructor(math: string, jax: InputJax<N, T, D>, display: boolean = true,\n              start: Location<N, T> = {node: null, n: 0, delim: ''},\n              end: Location<N, T> = {node: null, n: 0, delim: ''}) {\n    super(math, jax, display, start, end);\n  }\n\n  /**\n   * Insert the typeset MathItem into the document at the right location\n   *   If the starting and ending nodes are the same:\n   *     Split the text to isolate the math and its delimiters\n   *     Replace the math by the typeset version\n   *   Otherewise (spread over several nodes)\n   *     Split the start node, if needed\n   *     Remove nodes until we reach the end node\n   *     Insert the math before the end node\n   *     Split the end node, if needed\n   *     Remove the end node\n   *\n   * @override\n   */\n  public updateDocument(_html: HTMLDocument<N, T, D>) {\n    if (this.state() < STATE.INSERTED) {\n      if (this.inputJax.processStrings) {\n        let node = this.start.node as T;\n        if (node === this.end.node) {\n          if (this.end.n && this.end.n < this.adaptor.value(this.end.node).length) {\n            this.adaptor.split(this.end.node, this.end.n);\n          }\n          if (this.start.n) {\n            node = this.adaptor.split(this.start.node as T, this.start.n);\n          }\n          this.adaptor.replace(this.typesetRoot, node);\n        } else {\n          if (this.start.n) {\n            node = this.adaptor.split(node, this.start.n);\n          }\n          while (node !== this.end.node) {\n            let next = this.adaptor.next(node) as T;\n            this.adaptor.remove(node);\n            node = next;\n          }\n          this.adaptor.insert(this.typesetRoot, node);\n          if (this.end.n < this.adaptor.value(node).length) {\n            this.adaptor.split(node, this.end.n);\n          }\n          this.adaptor.remove(node);\n        }\n      } else {\n        this.adaptor.replace(this.typesetRoot, this.start.node);\n      }\n      this.start.node = this.end.node = this.typesetRoot;\n      this.start.n = this.end.n = 0;\n      this.state(STATE.INSERTED);\n    }\n  }\n\n  /**\n   * Update the style sheet for any changes due to rerendering\n   *\n   * @param {HTMLDocument} document   The document whose styles are to be updated\n   */\n  public updateStyleSheet(document: HTMLDocument<N, T, D>) {\n    document.addStyleSheet();\n  }\n\n  /**\n   * Remove the typeset math from the document, and put back the original\n   *  expression and its delimiters, if requested.\n   *\n   * @override\n   */\n  public removeFromDocument(restore: boolean = false) {\n    if (this.state() >= STATE.TYPESET) {\n      const adaptor = this.adaptor;\n      let node = this.start.node;\n      let math: N | T = adaptor.text('');\n      if (restore) {\n        let text = this.start.delim + this.math + this.end.delim;\n        if (this.inputJax.processStrings) {\n          math = adaptor.text(text);\n        } else {\n          const doc = adaptor.parse(text, 'text/html');\n          math = adaptor.firstChild(adaptor.body(doc));\n        }\n      }\n      if (adaptor.parent(node)) {\n        adaptor.replace(math, node);\n      }\n      this.start.node = this.end.node = math;\n      this.start.n = this.end.n = 0;\n    }\n  }\n\n}\n"]},"metadata":{},"sourceType":"script"}